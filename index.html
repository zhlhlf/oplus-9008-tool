<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>欧加真9008 工具 by zhlhlf</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <h1 class="app-title">欧加真9008工具 &nbsp;&nbsp; by zhlhlf</h1>
  <button id="about-btn" class="about-btn">关于</button>
  <div class="container">
    <div class="left-panel">
      <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
  <h2 style="margin: 0;">日志</h2>
  <button id="clear-logs-btn" class="small-btn">清空</button>
      </div>
      <div id="logs"></div>
    </div>
    
    <div class="right-panel">
      
      <div class="section compact">
        <h2>1. 连接与初始化</h2>
        <div class="form-group">
          <label>端口：</label>
          <span id="port-display">搜索中...</span>
          <button id="refresh-port" class="small-btn">刷新</button>
        </div>

        <div class="form-group">
          <label>DevPrg：</label>
          <input type="text" id="devprg-path" readonly placeholder="选择 devprg 文件" style="cursor: pointer;">
        </div>

        <div class="form-group">
          <label>Digest：</label>
          <input type="text" id="digest-path" readonly placeholder="选择 digest 文件" style="cursor: pointer;">
        </div>

        <div class="form-group">
          <label>signature：</label>
          <input type="text" id="sig-path" readonly placeholder="选择 signature 文件" style="cursor: pointer;">
        </div>

        <button id="start-btn" class="primary-btn compact-btn">连接并初始化</button>
      </div>

      <div class="section compact" id="xml-section">
        <h2>2. XML 操作</h2>
        <div class="form-group">
          <label>XML 文件：</label>
          <input type="text" id="xml-path" readonly placeholder="选择 XML 文件 (例如 rawprogram0.xml)" style="cursor: pointer;">
          <button id="show-xml-list-btn" class="small-btn" style="margin-left: 5px;">显示列表</button>
        </div>

        <div style="display: flex; gap: 10px;">
          <button id="read-xml-btn" data-xml-mode="read" class="secondary-btn compact-btn">按 XML 读取</button>
          <button id="run-xml-btn" data-xml-mode="run" class="secondary-btn compact-btn">按 XML 写入</button>
        </div>
      </div>

      <div class="section compact" id="control-section">
        <h2>3. 设备控制</h2>
        <div class="button-group" style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px;">
          <button id="reboot-btn" class="secondary-btn compact-btn">重启</button>
          <button id="reboot-recovery-btn" class="secondary-btn compact-btn">重启到恢复模式</button>
          <button id="reboot-fastboot-btn" class="secondary-btn compact-btn">重启到 Fastboot</button>
          <button id="reboot-edl-btn" class="secondary-btn compact-btn">重启到 EDL</button>
          <button id="read-gpt-btn" class="secondary-btn compact-btn">读取分区表</button>
        </div>
      </div>
    </div>
  </div>

  <div id="about-modal" class="modal">
    <div class="modal-content">
      <h2>关于</h2>
      <p>本工具由 <a href="https://zhlhlf.github.io/"><strong>zhlhlf</strong></a> 开发。</p>
      <h3>免责声明</h3>
      <p>1. 本工具仅供学习交流使用，请勿用于非法用途。</p>
      <p>2. 刷机有风险，操作需谨慎。使用本工具造成的任何设备损坏或数据丢失，作者概不负责。</p>
      <p>3. 请确保您拥有操作设备的所有权或已获得授权。</p>
    </div>
  </div>

  <div id="xml-preview-modal" class="modal">
    <div class="modal-content xml-modal-content">
      <div class="modal-header">
        <h2>XML 列表详情</h2>
        <div class="search-box">
          <input type="text" id="xml-search-input" placeholder="搜索标签 (Label)...">
        </div>
      </div>
      <div class="table-container xml-table-container">
        <table id="xml-table">
          <thead>
            <tr>
              <th style="width: 40px; text-align: center;"><input type="checkbox" id="select-all-xml"></th>
              <th style="width: 150px;">标签</th>
              <th>文件名 (点击选择)</th>
              <th style="width: 100px;">大小(KB)</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
      <div class="modal-footer">
        <mark>可以自由选择进行刷入或读写的标签</mark>
        <mark style="color: chocolate;">点击背景关闭窗口</mark>
      </div>
    </div>
  </div>

  <div id="toast-container" class="toast-container"></div>
  <script src="renderer.js"></script>
</body>
</html>
